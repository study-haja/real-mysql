# 쿼리 실행 절차

MySQL 쿼리 실행되는 과정은 크게 3단계로 나눌 수 있다.

1. 사용자로부터 요청된 SQL 문장을 잘게 쪼개서 MySQL 서버가 이해할 수 있는 수준으로 분리 한다.
   1. SQL 파싱 - 파서 모둘로 처리
   2. 문법적인 오류발견시 이 단계에서 걸러짐
   3. SQL 파스 트리가 만들어져 파스 트리를 이용해 쿼리를 실행
2. SQL의 파싱 정보를 확인하면서 어떤 테이블부터 읽고 어떤 인덱스를 이용해 테이블을 읽을지 선택한다.
   1. 불필요한 조건 제거 및 복잡한 연산의 단순화
   2. 여러 테이블의 조인이 있는 경우 어떤 순서로 테이블을 읽을지 결정
   3. 각 테이블에 사용된 조건과 인덱스 통계 정보를 이용해 사용할 인덱스를 결정
   4. 가져온 레코드들을 임시 테이블에 넣고 다시 한번 가공해야 하는지 결정
   5. 즉 최적화 및 실행 계획 수립
3. 두 번째 단계에서 결정된 테이블의 읽기 순서나 선택된 인덱스를 이용해 스토리지 엔진으로부터 데이터를 가져온다.
   1. 수립된 실행 계획으로 스토리지 엔진에 레코드를 읽어오도록 요청
   2. 레코드 조인 및 정렬 작업 수행
   3. 위 두단계는 MySQL 엔진에서 처리하고 마지막 단계는 MySQL엔진과 스토리지 엔진이 동시에 처리

