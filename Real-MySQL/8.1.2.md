# 랜덤 I/O와 순차 I/O

랜덤 I/O는 하드 디스크 드라이브의 플래터를 돌려서 읽어야 할 데이터가 저장된 위치로 디스크 헤더를 이동시킨 다음 데이터를 읽는 것을 의미하는데, 사실 순차 I/O 또한 이작업 과정은 같다. 다음 그림을 보자

* 랜덤 I/O와 순차 I/O

<img src="https://user-images.githubusercontent.com/45676906/121974741-074d0a80-cdbb-11eb-921d-c296934315a3.png" alt="MySQL" style="zoom:50%;" />



위 그림을 보면 3개의 데이터 혹은 인덱스 페이지를 저장하는데 시스템 콜을 몇번 불러오는지 보여주는 그림이다.

순차 I/O는 1번만 부르지만 랜덤 I/O는 3번이나 시스템 콜을 부른다. 이는 순차 I/O가 랜덤 I/O에 비해 3배나 성능이 빠르다는 것을 볼 수 있다. 즉 디스크의 성능은 디스크 헤더의 위치 이동 없이 얼마나 많은 데이터를 한번에 기록하느냐에 의해 결정된다고 볼 수 있다.

대부분의 데이터베이스는 작은 데이터를 빈번히 읽고 쓰기 때문에 MySQL에서는 그룹 커밋이나 바이너리 로그 버퍼 또는 InnoDB 로그 버퍼 등의 기능이 내장돼 있다.

SSD도 마찬가지로 랜덤 I/O가 순차 I/O 보다 전체 스루풋이 떨어지기 때문에 순차 I/O가 빠르다. 또한 순차도 모든 파일에 쓰기를 실행하면 반드시 동기화 작업을 거치기 때문에 순차 I/O도 자주 일어나면 성능이 안좋아진다. 따라서 캐시 메모리가 장착된 RAID 컨트롤러를 사용해 이러한 문제를 어느정도 해결해준다.

또한 쿼리를 튜닝해서 랜덤 I/O를 순차 I/O로 바꿔서 실행할 방법은 그다지 많지 않다. 일반적으로 쿼리를 튜닝하는 것은 랜덤 I/O 자체를 줄여주는 것이 목적이라고 할 수 있다. 여기서 랜덤 I/O를 줄인다는 것은 쿼리를 처리하는데 꼭 필요한 데이터만 읽도록 쿼리를 개선하는 것을 의미한다.