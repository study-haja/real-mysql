# 체인지 버퍼

인덱스를 업데이트 할 시, 인덱스 페이지가 버퍼 풀에 있지 않고 디스크에서 읽어 오게 되면 바로 수행하지 않고 임시 공간에 저장하고 사용자에게 결과를 바로 반환한다. 이 때 사용하는 임시 메모리 공간을 체인지 버퍼라 한다.

유니크 인덱스는 체인지 버퍼를 사용할 수 없다.

체인지 버퍼에 임시로 저장된 인덱스 레코드 조각은 이후 백그라운드 쓰레드에 의해 병합되는데, 이 쓰레드를 체인지 버퍼 머지 쓰레드라 부른다.

또한 8.0부터 INSERT, UPDATE, DELETE로 인해 키가 추가하거나 삭제하는 작업에 대해서도 버퍼링이 될 수 있게 개선 되었다.

그리고 5.5부터 `innodb_change_buffering` 시스템 변수로 작업의 종류별로 체인지 버퍼르르 활성화 시킬 수 있다.

체인지 버퍼는 기본적인 InnoDB 버퍼 풀로 설정된 메모리 공간의 25%까지 사용할 수 있게 설정할 수 있고 최대 50%까지 설정 가능하다. 이는 `innodb_change_buffer_max_size` 시스템 변수로 변경 가능하다.