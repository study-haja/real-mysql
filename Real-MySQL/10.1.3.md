# 코스트 모델

쿼리를 처리하기 위해 다음과 같은 작업을 실행한다.

* 디스크로부터 데이터 페이지 읽기
* 메모리로부터(Inno DB 버퍼풀) 데이터 페이지 읽기
* 인덱스 키 비교
* 레코드 평가
* 메모리 임시 테이블 작업
* 디스크 임시 테이블 작업

위와 같은 작업으로 비용을 계산하고 최적의 실행 계획을 세운다. 그리고 이와 같은 작업들의 비용을 코스트 모델이라고 한다.

코스트 모델에서 중요한 것은 각 단위 작업에 설정되는 비용 값이 커지면 어떤 실행 계획들이 교비용으로 바뀌고 어떤 실행 계획들이 저비용으로 바뀌는지를 파악하는 것이다.

5.7버전까지는 위와 같은 작입이 고정된 비율로 계산되었다. 하지만 8.0부터 DBMS 관리자가 조정할 수 있게 개선되었다.

8.0에서는 다음과 같은 설정을 통해 코스트 모델을 조절할 수 있다.

* server_cost : 인덱스를 찾고 레코드를 비교하고 임시 테이블 처리에 대한 비용 관리
* engine_cost : 레코드를 가진 데이터 페이지를 가져오는 데 필요한 비용 관리
* 공통점
  * cost_name : 코스트 모델의 각 단위 작업
    * Example
      * row_evaluate_cost : 스토리지 엔진이 반환한 레코드가 쿼리의 조건에 일치하는지를 평가하는 단위 작업
        * 증가 할수록 풀 테이블 스캔과 같이 많은 레코드를 처리하는 쿼리의 비용이 높아짐
      * key_compare_cost : 키 값의 비교 작업에 필요한 비용
        * 증가할수록 레코드 정렬과 같이 키 값 비교 처리가 많은 경우 쿼리의 비용이 높아짐
  * default_value : 각 단위 작업의 비용
  * cost_value : DBMS 관리자가 설정한 값
  * last_updated : 단위 작업의 비용이 변경된 시점 (옵티마이저 영향 x, 단순 정보성으로 관리되는 컬럼)
  * comment : 비용에 대한 추가 설명 (옵티마이저 영향 x, 단순 정보성으로 관리되는 컬럼)
* 차이점 (engine_cost에 2개 필드가 더 추가)
  * engine_name : 비용이 적용된 스토리지 엔진 (스토리지 엔진끼리 비용을 다르게 산출시킬 수 있음)
  * device_type : 디스크 타입 (8.0에서는 아직 활용 x)