## 6.2.2 KEY_BLOCK_SIZE 결정

테이블 압축을 적용하기전 KEY_BLOCK_SIZE를 4KB 또는 8KB로 테이블을 생성해서 샘플 데이터를 저장해보고 적절한지 판단하는것이 좋다. 샘플 데이터는 많을 수록 더 정확한 테스트가 가능한데 최소 10개정도의 데이터 페이지가 생성되도록 데이터를 INSERT해보는것이 좋다.

일반적으로 압축실패율(압축시도가 실패해서 페이지 스플릿후 재압축해야하는 경우)이 낮은 경우로 설정하는것이 좋지만 다음의 주의점이 있다.

### 주의할 점

- 압축 실패율이 높다고 해서 압축을 사용하지 말아야 한다는 것을 의미하지 않는다. 예를들어 INSERT만 되는 로그 테이블의 경우에는 데이터가 이후에 다시 변경되지 않으므로, 압축실패율이 높다고 해서 큰 손해는 아니다.
- 압축 실패율이 높지 않다고 하더라도 테이블의 데이터가 매우 빈번하게 조회되고 변경된다면 압축은 고려하지 않는것이 좋다. 예상외로 압축 알고리즘(zlib)은 많은 CPU자원이 더 든다.