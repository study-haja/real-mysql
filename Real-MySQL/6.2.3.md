## 6.2.3 압축된 페이지의 버퍼 풀 적재 및 사용

InnoDB 스토리지 엔진은 압축된 테이블의 데이터 페이지를 버퍼 풀에 적재하면 압축된 상태와 압축이 해제된 상태 2개 버전을 관리한다. 

- InnoDB 스토리지 엔진은 디스크에서 읽은 상태 그대로의 LRU 리스트
- 압축된 페이지들의 압축 해제 버전인  Unzip_LRU리스트를 별도로 관리하게 된다.

결국 InnoDB 스토리지 엔진은 버퍼 풀의 공간을 이중으로 사용함으로써 메모리를 낭비하는 효과를 가진다.

압축된 페이지에서 데이터를 읽거나 변경하기 위해서는 압축을 해제해야 하는데, 이 과정은 CPU를 상대적으로 많이 소모하는 작업이다.

### 보완하기 위한 방법

- InnoDB 버퍼풀 공간이 필요한 경우에는 LRU 리스트에서 원본 데이터 페이지(압축된 형태)는 유지하고 Unzip_LRU리스트에서 압축 해제된 버전은 제거해서 버퍼 풀공간을 확보
- 압축된 페이지가 자주 사용되는 경우, 압축 및 압축 해제 작업 최소화
- 압축된 데이터 페이지가 사용되지 않아서 LRU 리스트에서 제거되는 경우에는 Unzip_LRU 리스트에서도 함께 제거
- CPU 사용량이 높은 서버에서는 가능하면 압축과 압축 해제를 피하기 위해 Unzip_LRU의 비율을 높여서 유지
- Disk IO 사용량이 높은 서버에서는 가능하면 Unzip_LRU 리스트의 비율을 낮춰서 InnoDB 버퍼 풀의 공간을 더 확보하도록 동작